# go语言实际应用的记录

## 写个后台进程

写个很常见的服务,启动后加载配置文件,并定期起一个线程,从某些地方拿一些数据,加工后一边打日志,一边把处理结果存到一个数据库内.

### 配置文件

拿go读取配置文件一开始会有点不习惯,因为没有resource这个概念,没办法把配置文件打进包内; 但是,经过短时间回忆,使用`embed`这个功能成功直接把配置文件给嵌入到包体内,成功解决了找不到配置文件的问题.

之后,定义结构体时的tag很有趣,作为纯文本格式的元数据,确实比java的拓展性要好,至少不会让每个开源库都自己造轮子.

模块的init函数很好用! java如果用static 代码块则没法保证执行的顺序(使用前没有办法确保前一个模块也初始好了),如果不使用,则只能靠控制反转,让框架来初始化,之后靠注入来实现. init函数结合大小写控制导出,能实现对外导出结构体时自动确保初始化完成.

相同目录下包必须一样,看起来似乎很普通,但是结合一条:`编译成为二进制文件得类必须是package main&& 具有main函数`,就能确保不把启动类和其他代码混合到一起(当然,到底是走/cmd/projectname/main.go,还是/project/cmd/main.go就是另外一回事了)
