---
author: "Certseeds"
date: "2025-08-20"
lastmod: "2025-08-20"
title: "制作svg的简短总结"
description: "列举制作svg的几种方式,以便之后查验"
tags: ["notes", "experience"]
---

# 制作svg的简短总结

去年底发布了一版 `@nanoseeds/wh40k-icon` 之后, 有一段时间没继续向这个项目投入时间了, 重新拾起来发现了几种之前没用过的方式, 简单总结一下, 以便后续有时间时能快速回忆起来

## 高质量的原图

高质量的原图能够极大的减少后续工作量: 一张1000像素乘1000像素的黑白图像直接就能被`potrace`提取出来, 一张100x100的怎么搞图像学操作结果也很抽象, 得反复的操作才能得出并不完美的结果. 与其投入时间操作, 不如花时间找点codex做参考.

## 使用简单图形直接绘制

非常简单的图案可以直接在vscode里面画出来, 比如只有圆和直线的连队涂装, 简单十几行就能要求claude写出产物.

## 使用gimp绘制

如果图像由简单的直线与圆构成, 可以把图像拖到gimp内, 为每一个图案新建一个图层, 通过路径工具/椭圆工具勾画出边界, 再将内部涂满颜色, 调整图层顺序以实现颜色覆盖, 最后加个纯色的背景, 再把原始图片隐藏掉, 导出一个只有新图层的图片, 这样将图像转换为了一张'高质量'的原图

## 使用图像学手段尽可能地提取

1. 将background调整为 white, black, yellow, blue, red
2. 将图像转换为 HSV 颜色空间, 分别提取通道, 选择最优的方案.
3. 加入中间图像png, 以便同步观察`potrace`的输入(以及更方便的观察上述参数调整的输出)
4. 使用`level`参数过滤像素, 去掉最高, 去掉最低, 获取合适的图案

这个步骤很适合llm参与, 让llm指导该加入什么操作实现预期效果.

## 使用gimp在原图上染色

这是最后手段, 非必要不建议使用, 效果也不会特别好.

在gimp中将规则的图案处理好之后, 拿起油漆桶工具, 对边缘太复杂的图案进行染色, 通过对参数进行二分调试, 尝试获取到一个最优的参数, 能将图案勾勒出, 最后将参数调整到0, 对图案边缘/内部进行像素级别的染色.

这个过程耗时间, 无法自动化, 并且产出可能不如像素高一点的原图直出, 可以说是 '末日之选'.

## 对svg进行后处理

### 去除噪点

若是原图质量比较糟糕, 提取出来的图像会伴随着背景, 噪点, 肩甲边缘, 摄影反光等导致的色块, 因此需要将某些svg内部的path去掉. 一般是首先去掉几个规模非常大, 显然不是正经图形的; 再去掉一些规模很小, 一看就是一小点的; 到最后从上到下的给path染色, 将不合适的去除.

### 添加规则的图案

图像中经常会出现一些规则的图形, 如正六边形/圆等, 可以直接计算好中点, 通过三角函数计算出宽偏移以及高偏移量, 在svg中将路径点绘制出来, 覆盖在原始的path后, 新的图案就会覆盖在原始path后, 这样就能将原始图案覆盖住, 令图案更美观.

如果能在不同的图像中寻找到共同之处, 比如铁手的外十二边齿轮, 以及更通用的颅骨, 可以直接将这个通用图案抽取出来. 复制到其他图片中后, 调整缩放比例, 反复调整位置, 将原图染色, 新部分染色, 并加以对比, 最后留下新图像, 删除旧path.

### 移动现有的图案

当图中出现复数个几乎相同的图案(或者说, 完全相同)时, 可以考虑保留最规整的哪一个, 将其余几个染色后, 将best-one复制并移动, 试图覆盖住染色图案, 最后将染色图案去除, 这样能有效提高图案的一致性; 如果出现镜像图案, 也可以用svg的属性来解决(不过可能会导致svg2font步骤结果受损, 可以考虑让llm把属性apply到节点上, 得到一个从属性上镜像的图案)
